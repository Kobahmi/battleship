(()=>{"use strict";const e=class{constructor(e){this.name=e,this.turn=!0}getName=()=>this.name;checkTurn=()=>this.turn;setName=e=>{this.name=e};startTurn=()=>{!1===this.turn&&(this.turn=!0)};endTurn=e=>{!0===this.turn&&(this.turn=!1),e.startTurn()};attack(e,t,a,r){this.checkTurn&&(r.receiveAttack(e,t),this.endTurn(a))}},t=class{constructor(){this.gameBoardArray=this.createGameBoard(),this.missedAttacks=[]}getGameBoard=()=>this.gameBoardArray;getMissedAttacksArray=()=>this.missedAttacks;createGameBoard=()=>{const e=[];let t=[];for(let a=0;a<10;a++){for(let e=0;e<10;e++)t.push({shipName:void 0,shipIndex:void 0});e.push(t),t=[]}return e};checkIfShipPlacementIsValid(e,t,a,r){if("v"===r){if(t>10||t<0||a>10||a<0||a+e>10)return!1;for(let r=a;r<a+e;r++)if(void 0!==this.gameBoardArray[r][t].shipName)return!1;return!0}if("h"===r){if(t>10||t<0||a>10||a<0||t+e>10)return!1;for(let r=t;r<t+e;r++)if(void 0!==this.gameBoardArray[a][r].shipName)return!1;return!0}}placeShip=(e,t,a,r)=>{if("v"===r&&this.checkIfShipPlacementIsValid(e.getLength(),t,a,"v"))for(let r=0;r<e.getLength();r++)this.gameBoardArray[a+r][t].shipName=e,this.gameBoardArray[a+r][t].shipIndex=r;if("h"===r&&this.checkIfShipPlacementIsValid(e.getLength(),t,a,"h"))for(let r=0;r<e.getLength();r++)this.gameBoardArray[a][t+r].shipName=e,this.gameBoardArray[a][t+r].shipIndex=r};receiveAttack=(e,t)=>{void 0===this.gameBoardArray[t][e].shipName?this.missedAttacks.push({x:e,y:t}):this.gameBoardArray[t][e].shipName.hit(this.gameBoardArray[t][e].shipIndex)};checkIfAllShipSunk=()=>{let e=!0;return this.gameBoardArray.forEach((t=>{t.forEach((t=>{t.shipName&&!1===t.shipName.isSunk()&&(e=!1)}))})),e}},a=class{constructor(e){this.length=e,this.ship=this.createShip()}getLength=()=>this.length;getShip=()=>this.ship;createShip=()=>{const e=[];let t=this.length;for(;t>0;)e.push({hit:!1}),t-=1;return e};hit=e=>{this.ship[e].hit=!0};isSunk=()=>!!this.ship.every(this.checkHit);checkHit=e=>!0===e.hit},r=document.querySelector(".modal-one"),s=document.querySelector(".modal-two"),i=document.querySelector(".form-one"),l=document.querySelector(".player-name-input"),o=document.querySelector(".player-name"),n=document.querySelector(".addShips"),c=document.querySelector("#battleship"),d=document.querySelector("#carrier"),h=document.querySelector("#submarine"),y=document.querySelector("#destroyer"),p=document.querySelector("#patrolboat"),m=document.querySelector(".aiSide"),u=document.querySelector(".winner-text"),g=document.querySelector(".rotation"),f=document.querySelector(".rotate"),S=document.querySelector(".restart"),k=new a(5),v=new a(4),I=new a(3),A=new a(3),B=new a(2),x=new a(5),q=new a(4),L=new a(3),N=new a(3),w=new a(2),$=new t,b=new t,P=new e("ScardyCat"),C=new class extends e{constructor(e,t,a){super(e),this.turn=!1,this.enemyPlayer=t,this.enemyBoard=a,this.attackArray=[]}getAttackArray=()=>this.attackArray;generateRandomAttack=()=>{if(this.checkTurn()){const e={x:void 0,y:void 0};for(;;){const t=Math.floor(10*Math.random()),a=Math.floor(10*Math.random());if(e.x=t,e.y=a,!this.attackArray.some((t=>t.x===e.x&&t.y===e.y))){this.attackArray.push(e),this.attack(e.x,e.y,this.enemyPlayer,this.enemyBoard);break}}}}}("COMPUTER",P,$);window.addEventListener("load",(()=>{r.showModal()})),i.addEventListener("submit",(e=>{e.preventDefault();const t=l.value;P.setName(t),o.textContent=`${P.getName()}'s Board`,r.close()})),g.addEventListener("click",(()=>{c.classList.toggle("rotated"),d.classList.toggle("rotated"),h.classList.toggle("rotated"),y.classList.toggle("rotated"),p.classList.toggle("rotated")})),S.addEventListener("click",(()=>{window.location.reload()}));const E=e=>{e.addEventListener("dragstart",(e=>{e.dataTransfer.setData("text/plain",e.target.id)}))};function M(e){for(;;){let t=[];if(t=[Math.floor(10*Math.random()),Math.floor(10*Math.random())],1===Math.floor(2*Math.random())){if(b.checkIfShipPlacementIsValid(e.getLength(),t[0],t[1],"v")){b.placeShip(e,t[0],t[1],"v");break}}else if(b.checkIfShipPlacementIsValid(e.getLength(),t[0],t[1],"h")){b.placeShip(e,t[0],t[1],"h");break}}}const V=e=>{const t=document.querySelector(`.${e}`);for(let a=0;a<10;a++)for(let r=0;r<10;r++){const s=document.createElement("div");s.classList.add("cell"),s.setAttribute("data-x",r),s.setAttribute("data-y",a),"computerBoard"===e?s.addEventListener("click",(e=>{T(e.target)})):"playerBoard"===e&&(s.addEventListener("dragover",(e=>{e.preventDefault()})),s.addEventListener("drop",(e=>{e.preventDefault(),D(e)}))),t.appendChild(s)}},T=e=>{const t=e.getAttribute("data-x"),a=e.getAttribute("data-y");P.attack(t,a,C,b),G("computerBoard",b),e.style.pointerEvents="none",b.checkIfAllShipSunk()&&H(P.getName()),C.generateRandomAttack(),G("playerBoard",$),$.checkIfAllShipSunk()&&H("AI")},D=e=>{const t=e.dataTransfer.getData("text"),a=parseInt(e.target.getAttribute("data-x")),r=parseInt(e.target.getAttribute("data-y"));switch(t){case"battleship":if($.checkIfShipPlacementIsValid(v.length,a,r,"h")&&c.classList.contains("rotated")){$.placeShip(v,a,r,"h"),G("playerBoard",$);const e=document.querySelector(`#${t}`);n.removeChild(e),n.childNodes.length<=6&&(n.style.display="none",m.style.display="flex",f.style.display="none")}else if($.checkIfShipPlacementIsValid(v.length,a,r,"v")){$.placeShip(v,a,r,"v"),G("playerBoard",$);const e=document.querySelector(`#${t}`);n.removeChild(e),n.childNodes.length<=6&&(n.style.display="none",m.style.display="flex",f.style.display="none")}break;case"carrier":if($.checkIfShipPlacementIsValid(k.length,a,r,"h")&&c.classList.contains("rotated")){$.placeShip(k,a,r,"h"),G("playerBoard",$);const e=document.querySelector(`#${t}`);n.removeChild(e),n.childNodes.length<=6&&(n.style.display="none",m.style.display="flex",f.style.display="none")}else if($.checkIfShipPlacementIsValid(k.length,a,r,"v")){$.placeShip(k,a,r,"v"),G("playerBoard",$);const e=document.querySelector(`#${t}`);n.removeChild(e),n.childNodes.length<=6&&(n.style.display="none",f.style.display="none")}break;case"submarine":if($.checkIfShipPlacementIsValid(A.length,a,r,"h")&&h.classList.contains("rotated")){$.placeShip(A,a,r,"h"),G("playerBoard",$);const e=document.querySelector(`#${t}`);n.removeChild(e),n.childNodes.length<=6&&(n.style.display="none",m.style.display="flex",f.style.display="none")}else if($.checkIfShipPlacementIsValid(A.length,a,r,"v")){$.placeShip(A,a,r,"v"),G("playerBoard",$);const e=document.querySelector(`#${t}`);n.removeChild(e),n.childNodes.length<=6&&(n.style.display="none",m.style.display="flex",f.style.display="none")}break;case"destroyer":if($.checkIfShipPlacementIsValid(I.length,a,r,"h")&&y.classList.contains("rotated")){$.placeShip(I,a,r,"h"),G("playerBoard",$);const e=document.querySelector(`#${t}`);n.removeChild(e),n.childNodes.length<=6&&(n.style.display="none",m.style.display="flex",f.style.display="none")}else if($.checkIfShipPlacementIsValid(I.length,a,r,"v")){$.placeShip(I,a,r,"v"),G("playerBoard",$);const e=document.querySelector(`#${t}`);n.removeChild(e),n.childNodes.length<=6&&(n.style.display="none",m.style.display="flex",f.style.display="none")}break;case"patrolboat":if($.checkIfShipPlacementIsValid(B.length,a,r,"h")&&p.classList.contains("rotated")){$.placeShip(B,a,r,"h"),G("playerBoard",$);const e=document.querySelector(`#${t}`);n.removeChild(e),n.childNodes.length<=6&&(n.style.display="none",m.style.display="flex",f.style.display="none")}else if($.checkIfShipPlacementIsValid(B.length,a,r,"v")){$.placeShip(B,a,r,"v"),G("playerBoard",$);const e=document.querySelector(`#${t}`);n.removeChild(e),n.childNodes.length<=6&&(n.style.display="none",m.style.display="flex",f.style.display="none")}}},G=(e,t)=>{const a=t.getGameBoard(),r=t.getMissedAttacksArray();a.forEach(((t,a)=>{t.forEach(((t,r)=>{if(t.shipName)if(!0===t.shipName.checkHit(t.shipName.getShip()[t.shipIndex])){const t=document.querySelector(`.${e} [data-x="${r}"][data-y ="${a}"]`);t.classList.add("hit"),t.classList.remove("occupied")}else!1===t.shipName.checkHit(t.shipName.getShip()[t.shipIndex])&&"playerBoard"===e&&document.querySelector(`.${e} [data-x="${r}"][data-y ="${a}"]`).classList.add("occupied")}))})),r.forEach((t=>{const a=document.querySelector(`.${e} [data-x="${t.x}"][data-y ="${t.y}"]`);a.textContent="X",a.classList.add("missed")}))},H=e=>{s.showModal(),u.textContent=`${e} WINS!`};E(c),E(d),E(h),E(y),E(p),M(x),M(q),M(L),M(N),M(w),V("playerBoard"),V("computerBoard"),G("playerBoard",$),G("computerBoard",b)})();